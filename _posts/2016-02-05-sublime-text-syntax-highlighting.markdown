---
layout: post
title:  "How To Make a Custom Syntax Highlighting for Sublime Text"
date:   2016-02-05 05:49:38 +0200
categories: programming
---

Sublime Text editor has built-in syntax highlighting support for too many languages. In case none of the supported highlightings covers your needs you can create your own. The idea of writing custom syntax definitions first came to light (for me) while looking at the log files generated by one of our games (By the way, I am working at [PeakGames](http://www.peakgames.net) and we are building awesome [mobile games](https://play.google.com/store/apps/dev?id=8795996613429359757)). If the log file contains a lot of information it may be difficult to see the most important parts. Using tools like **grep** does not really help if you want to see the whole context. 

Here is a step by step guide to write your custom syntax highlighting for Sublime Text editor:

# 1. Install 'Package Control'
[Package Control](https://packagecontrol.io/installation) is a package manager for Sublime Text that makes it simple to find, install and keep packages up-to-date.

# 2. Install 'PackageDev' Package
[PackageDev](https://github.com/SublimeText/PackageDev) is a Sublime Text package that helps create and edit syntax definitions, snippets, completions files, build systems and other Sublime Text extension files.

# 3. Create A New Syntax Definition
After installing [PackageDev](https://github.com/SublimeText/PackageDev), create a new syntax definition file  through **Tools | Packages | Package Development** as seen in the screenshot below.

![PackageDev new syntax definition](/assets/syntaxhighlighting/packagedev.png)

# 4. Define Your Syntax
Defining a syntax is simply writing regular expressions to find text in the document. [Here](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html) is an official documentation about writing syntax definitions for Sublime Text. 
In this step you need to write regular expressions to match the text in your documents. I have used [this](http://regexr.com/) online tool to test the regular expressions.

Below is a syntax definition file for our logs. It is good for a starting point because it is simple.

<script src="https://gist.github.com/ilkinulas/3c73f17557a7dcc910d3.js"></script>

|Line Number| Keyword     | Description |
|-----------|-------------|-------------|
|3          |  name       |Name of your syntax definition. You can select syntax of the document in Sublime Text by _View->Syntax_ as seen in the screenshot below.|
|4          |  scopeName  | This will be used while defining colors in the color theme definition files.|
|5          |  fileTypes  | Sublime text automatically chooses your syntax definition if the file type matches. You can choose the syntax definition explicitly by _View->Sytax_ menu.|



![Syntax Choosing](/assets/syntaxhighlighting/syntax_choosing.png)



# 5. Define Your Colors
In this step we are going to set colors and text styles (bold, italic vs). Our syntax definition will match the text with the regular expressions and the color theme will change the color and style of the displayed text. Open your favorite color theme. Here is the path to the theme file for **Monokai** in my computer.

{% highlight bash %}
/Users/ilkinulas/Library/Application Support/Sublime Text 2/Packages/Color Scheme - Default/Monokai.tmTheme
{% endhighlight %}

Below is a sample that defines color and text style for  **text.command** pattern (this was defined in the syntax definition on **line 9** in the gist above). 

{% highlight xml %}
<dict>             
	<key>scope</key>
	<string>gin.log text.command</string>
	<key>settings</key> 
	<dict>                 
		<key>foreground</key>
		<string>#F7860A</string>
		<key>fontStyle</key>
		<string>bold</string>			
	</dict> 			
</dict> 	
{% endhighlight %}

That's it. Now the log files are looking much more meaningful when opened in the Sublime Text editor.